<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rasheed AI Chatbot</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-0.5rem); }
        }
        .animate-bounce {
            animation: bounce 1s infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        const { useState, useRef, useEffect, createElement: h } = React;

        const BotIcon = () => h('svg', { width: 24, height: 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round' },
            h('path', { d: 'M12 8V4H8' }),
            h('rect', { width: 16, height: 12, x: 4, y: 8, rx: 2 }),
            h('path', { d: 'M2 14h2' }),
            h('path', { d: 'M20 14h2' }),
            h('path', { d: 'M15 13v2' }),
            h('path', { d: 'M9 13v2' })
        );

        const UserIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round' },
            h('path', { d: 'M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2' }),
            h('circle', { cx: 12, cy: 7, r: 4 })
        );

        const SendIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round' },
            h('path', { d: 'm22 2-7 20-4-9-9-4Z' }),
            h('path', { d: 'M22 2 11 13' })
        );

        function Chatbot() {
            const [messages, setMessages] = useState([
                { role: 'assistant', content: "Hello! I'm Rasheed, your AI assistant. How can I help you today?" }
            ]);
            const [input, setInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            const handleSubmit = async () => {
                if (!input.trim() || isLoading) return;

                const userMessage = input.trim();
                setInput('');
                setMessages(prev => [...prev, { role: 'user', content: userMessage }]);
                setIsLoading(true);

                try {
                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            model: 'claude-sonnet-4-20250514',
                            max_tokens: 1000,
                            system: 'You are Rasheed, a helpful and friendly AI assistant.',
                            messages: [
                                ...messages.map(m => ({ role: m.role, content: m.content })),
                                { role: 'user', content: userMessage }
                            ],
                        }),
                    });

                    const data = await response.json();
                    const assistantMessage = data.content
                        .filter(item => item.type === 'text')
                        .map(item => item.text)
                        .join('\n');

                    setMessages(prev => [...prev, { role: 'assistant', content: assistantMessage }]);
                } catch (error) {
                    setMessages(prev => [...prev, { 
                        role: 'assistant', 
                        content: 'Sorry, I encountered an error. Please try again.' 
                    }]);
                } finally {
                    setIsLoading(false);
                }
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSubmit();
                }
            };

            return h('div', { className: 'flex flex-col h-screen bg-gradient-to-br from-emerald-50 to-teal-100' },
                h('div', { className: 'bg-white shadow-md px-6 py-4 border-b border-gray-200' },
                    h('div', { className: 'flex items-center gap-3' },
                        h('div', { className: 'bg-teal-600 p-2 rounded-lg' }, h(BotIcon)),
                        h('div', null,
                            h('h1', { className: 'text-xl font-bold text-gray-800' }, 'Rasheed AI'),
                            h('p', { className: 'text-sm text-gray-500' }, 'Your intelligent assistant')
                        )
                    )
                ),
                h('div', { className: 'flex-1 overflow-y-auto px-4 py-6 space-y-4' },
                    ...messages.map((msg, idx) =>
                        h('div', { key: idx, className: `flex gap-3 ${msg.role === 'user' ? 'flex-row-reverse' : 'flex-row'}` },
                            h('div', { className: `flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${msg.role === 'user' ? 'bg-teal-600' : 'bg-gray-300'}` },
                                msg.role === 'user' ? h(UserIcon) : h(BotIcon)
                            ),
                            h('div', { className: `max-w-xs md:max-w-md lg:max-w-lg xl:max-w-xl px-4 py-3 rounded-2xl ${msg.role === 'user' ? 'bg-teal-600 text-white' : 'bg-white text-gray-800 shadow-sm'}` },
                                h('p', { className: 'whitespace-pre-wrap break-words' }, msg.content)
                            )
                        )
                    ),
                    isLoading && h('div', { className: 'flex gap-3' },
                        h('div', { className: 'flex-shrink-0 w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center' },
                            h(BotIcon)
                        ),
                        h('div', { className: 'bg-white px-4 py-3 rounded-2xl shadow-sm' },
                            h('div', { className: 'flex gap-1' },
                                h('div', { className: 'w-2 h-2 bg-gray-400 rounded-full animate-bounce' }),
                                h('div', { className: 'w-2 h-2 bg-gray-400 rounded-full animate-bounce', style: { animationDelay: '0.1s' } }),
                                h('div', { className: 'w-2 h-2 bg-gray-400 rounded-full animate-bounce', style: { animationDelay: '0.2s' } })
                            )
                        )
                    ),
                    h('div', { ref: messagesEndRef })
                ),
                h('div', { className: 'bg-white border-t border-gray-200 px-4 py-4' },
                    h('div', { className: 'max-w-4xl mx-auto' },
                        h('div', { className: 'flex gap-2' },
                            h('input', {
                                type: 'text',
                                value: input,
                                onChange: (e) => setInput(e.target.value),
                                onKeyPress: handleKeyPress,
                                placeholder: 'Type your message...',
                                disabled: isLoading,
                                className: 'flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed'
                            }),
                            h('button', {
                                onClick: handleSubmit,
                                disabled: isLoading || !input.trim(),
                                className: 'bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors'
                            }, h(SendIcon))
                        )
                    )
                )
            );
        }

        ReactDOM.render(h(Chatbot), document.getElementById('root'));
    </script>
</body>
</html>